<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>UrbanFabric</title>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252" />
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<link href='http://fonts.googleapis.com/css?family=Josefin+Sans+Std+Light' rel='stylesheet' type='text/css'/>
<script src="/static/jquery.js" type="text/javascript"> </script>
<script src="/static/bnhash.js" type="text/javascript"> </script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<style type="text/css">
body: {
margin:
    0 0 0 0;
background-color:
    transparent;
}

#ufmap{
top:
0;
left:
0;
position:
absolute;
}

#header:{top:0px;
width:
100%;
height:
150px;
}

#header-decoration{z-index:1000;
width:
100%;
position:
absolute;
top:
75px;
height:
25px;
left:
0;
background-color:
orange;
}

#header-image{z-index:1100;
width:
150px;
height:
150px;
top:
5px;
left:
5px;
background-color:
red;
position:
absolute;
}


#header-text{z-index:1100;
left:
180px;
top:
40px;
position:
absolute;
font-size:
60px;
font-family:
'Josefin Sans Std Light', Calibri, Verdana, Helvetica, sans-serif;
text-shadow:
2px 2px 8px #000;
}

#header-menu{
z-index:
1100;
right:
0px;
top:
50px;
width:
140 px;
height:
50px;
position:
absolute;

}

</style>
</head>
<body>
<div id="ufmap">
        </div>

        <div id="header">
                <div id="header-decoration"></div>
                        <div id="header-image">img</div>
                                <div id="header-text"><span id="collection-name">
                                        Castel Maggiore</span></div>
                                        <div id="header-menu">stuff</div>
                                                </div>
                                                <div id="left-container"></div>
                                                        <div id="searchbox"></div>

                                                                <script>
resize = function () {
    $('#map').width($(window).width());
    $('#map').height($(window).height());
}

change_hash = function(hash){

list = hash.split("/");
count = list.length;
if (count >0)
var collection = list[0];
if (jQuery.old_collection != collection){
	jQuery.old_collection = collection;
	$.getJSON('/collection/'+collection, function(data){
	console.debug(data);
		$('#collection-name').text(data.main.name);
	});
	}
if (count >1)
var item = list[1];
	//get item data and display it
}

jQuery.ufmap = null;
localize = function(position) {
    initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    jQuery.ufmap.setCenter(initialLocation);
}
$(function() {
	change_hash(window.location.hash.split('#')[1]);
    $('#ufmap').width($(window).width());
    $('#ufmap').height($(window).height());
    var browserSupportFlag =  new Boolean();
	var mapstyle = [
  {
    featureType: "transit",
    elementType: "all",
    stylers: [
      { saturation: 98 },
      { hue: "#ff8c00" }
    ]
  },{
    featureType: "road",
    elementType: "all",
    stylers: [
      { hue: "#ff8c00" }
    ]
  },{
    featureType: "landscape.man_made",
    elementType: "all",
    stylers: [
      { saturation: 99 },
      { hue: "#ff8c00" },
      { lightness: 1 },
      { visibility: "simplified" }
    ]
  },{
    featureType: "poi.business",
    elementType: "all",
    stylers: [
      { saturation: 0 },
      { lightness: 28 }
    ]
  },{
    featureType: "all",
    elementType: "all",
    stylers: [
      { saturation: 100 },
      { lightness: 10 },
      { gamma: 0.94 }
    ]
  }
];


	
    var myOptions = {
		zoom:16,
		mapTypeControlOptions: {
       mapTypeIds: [google.maps.MapTypeId.SATELLITE, google.maps.MapTypeId.HYBRID, 'hiphop']
    },
		mapTypeControl:true,
		mapTypeControlOptions: {
			style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
			position:google.maps.ControlPosition.TOP
        },
		navigationControl:true,
		navigationControlOptions: {
			style:
            google.maps.NavigationControlStyle.SMALL   ,
position:
            google.maps.ControlPosition.BOTTOM
        },
    };
    jQuery.ufmap = new google.maps.Map(document.getElementById("ufmap"), myOptions);
	  var styledMapOptions = {
      name: "Hip-Hop"
  }

  var jayzMapType = new google.maps.StyledMapType(
      mapstyle, styledMapOptions);

  jQuery.ufmap.mapTypes.set('hiphop', jayzMapType);
  jQuery.ufmap.setMapTypeId('hiphop');
    if (navigator.geolocation) {
        jQuery.watcher = navigator.geolocation.watchPosition(localize, handleNoGeolocation);

        // Browser doesn't support Geolocation
    } else {
        handleNoGeolocation();
    }

    function handleNoGeolocation() {

    }
jQuery.old_collection = "";
    $( window.location ).bind("change",
function(e, d){
change_hash(d.currentHash);
});
                          });
</script>
</body>
</html>
